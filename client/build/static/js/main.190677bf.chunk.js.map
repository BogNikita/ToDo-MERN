{"version":3,"sources":["context/AuthContext.js","hooks/http.hook.js","Page/AuthPage.js","context.js","Loader.js","Todo/TodoCreate.js","Modal/ModalWindow.js","Todo/TodoItem.js","Todo/TodoList.js","Page/MainPage.js","App.js","hooks/auth.hook.js","route.js","index.js"],"names":["noop","AuthContext","createContext","token","userId","login","logout","isAuthenticated","useHttp","useState","loading","setLoading","error","setError","request","useCallback","url","a","method","body","headers","JSON","stringify","fetch","response","json","data","ok","Error","message","clearError","layout","labelCol","span","wrapperCol","tailLayout","offset","getCookie","name","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","AuthPage","auth","useContext","email","password","remember","form","setForm","changeHandler","e","target","value","registerHandler","success","loginHandler","useEffect","initialValues","Item","initialValue","label","rules","required","onChange","Password","valuePropName","type","onClick","disabled","Context","Loader","className","TextArea","Input","useInputValue","defaultValue","setValue","bind","event","clear","TodoCreater","onCreate","title","id","onToggle","description","input","textArea","submitHandler","preventDefault","trim","onSubmit","htmlFor","placeholder","showCount","maxLength","style","marginTop","htmlType","ModalWindow","state","setState","visible","onCancel","footer","TodoCreate","TodoItem","todo","index","removeTodo","changeTodo","changeItem","setChangeItem","completed","textDecoration","bordered","extra","EditOutlined","checked","DeleteOutlined","TodoList","props","todos","map","item","MainPage","fetchTodo","Authorization","toggleTodo","find","newTodos","status","filter","addTodo","newTask","Date","now","toLocaleString","push","Provider","length","Header","Layout","Content","Footer","App","setToken","setUserId","jwtToken","localStorage","setItem","removeItem","parse","getItem","useAuth","routes","path","to","exact","useRoutes","href","padding","textAlign","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.190677bf.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\n\r\nfunction noop() {}\r\n\r\nexport const AuthContext = createContext({\r\n    token: null, userId: null, login: noop, logout: noop, isAuthenticated: false\r\n});","import { useCallback, useState } from \"react\"\r\n\r\n\r\nexport const useHttp = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null)\r\n\r\n    const request = useCallback(async (url, method = 'GET', body = null, headers = {}) => {\r\n        setLoading(true);\r\n        try {\r\n            if (body) {\r\n                body = JSON.stringify(body);\r\n                headers['Content-Type'] = 'application/json';\r\n            }\r\n\r\n           const response =  await fetch(url, {\r\n                method, body, headers\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (!response.ok) {\r\n                throw new Error(data.message || 'Что-то пошло не так');\r\n            }\r\n            setLoading(false);\r\n            return data\r\n        } catch (e) {\r\n            setLoading(false);\r\n            setError(e.message);\r\n            throw e;\r\n        }\r\n    }, []);\r\n\r\n    const clearError = () => {\r\n        setError(null)\r\n    };\r\n\r\n\r\n    return { loading, request, error, clearError}\r\n}","/* eslint-disable no-useless-escape */\r\nimport { Form, Input, Button, Checkbox, message, Space } from 'antd';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { AuthContext } from '../context/AuthContext';\r\nimport { useHttp } from '../hooks/http.hook';\r\n\r\nconst layout = {\r\n    labelCol: {\r\n      span: 8,\r\n    },\r\n    wrapperCol: {\r\n      span: 16,\r\n    },\r\n};\r\nconst tailLayout = {\r\n  wrapperCol: {\r\n    offset: 8,\r\n    span: 16,\r\n  },\r\n};\r\n\r\nfunction getCookie (name) {\r\n  let matches =  document.cookie.match(new RegExp(\r\n    \"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\r\n  ));\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n};\r\n\r\n\r\n\r\nconst AuthPage = () => {\r\n  const auth = useContext(AuthContext);\r\n  const {loading, error, request, clearError} = useHttp();\r\n\r\n  const [form, setForm] = useState({\r\n    email: getCookie('user'), password: '', remember: true\r\n  });\r\n\r\n  const changeHandler = (e) => {\r\n    setForm({...form, [e.target.name]: e.target.value })\r\n  };\r\n\r\n  const registerHandler = async () => {\r\n    try {\r\n      const data = await request('/api/auth/register/', 'POST', {...form});\r\n      message.success(data.message);\r\n    } catch (e) {\r\n    }\r\n  };\r\n\r\n  const loginHandler = async () => {\r\n    try {\r\n      const data = await request('/api/auth/login/', 'POST', {...form});\r\n      auth.login(data.token, data.userId)\r\n    } catch (e) {\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      message.error(error);\r\n      clearError();\r\n    }\r\n  }, [error, clearError]);\r\n\r\n  return (\r\n    <Space>\r\n      <Form\r\n      {...layout}\r\n      name=\"basic\"\r\n      initialValues={{\r\n        remember: true,\r\n      }}\r\n      >\r\n        <Form.Item\r\n          initialValue = {form.email}\r\n          label=\"Email\"\r\n          name=\"email\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n            },\r\n          ]}\r\n        >\r\n          <Input onChange={changeHandler} name=\"email\"  />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"Пароль\"\r\n          name=\"password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n            },\r\n          ]}\r\n        >\r\n          <Input.Password onChange={changeHandler} name=\"password\"/>\r\n        </Form.Item>\r\n\r\n        <Form.Item {...tailLayout} name=\"remember\" onChange={() => setForm({...form, remember: !form.remember})} valuePropName=\"checked\">\r\n          <Checkbox name=\"remember\">Запомнить меня</Checkbox>\r\n        </Form.Item>\r\n        <Form.Item {...tailLayout}>\r\n          <Button type=\"primary\" onClick={loginHandler} disabled={loading}>\r\n            Войти\r\n          </Button>\r\n          <Button onClick={registerHandler} disabled={loading}>\r\n            Зарегистрироваться\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Space>\r\n  );\r\n}\r\n\r\n\r\nexport default AuthPage;","import { createContext } from \"react\";\r\n\r\nconst Context = createContext();\r\n\r\nexport default Context;","export default function Loader() {\r\n\r\n\r\n    return (\r\n        <div className=\"loader-wrapper\">\r\n            <div className=\"lds-ripple\">\r\n                <div></div>\r\n                <div></div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { useState } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport { Input, Button } from 'antd';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst useInputValue = (defaultValue) => {\r\n    const [value, setValue] = useState(defaultValue);\r\n\r\n    return {\r\n        bind: {\r\n            value,\r\n            onChange: event => setValue(event.target.value)\r\n        },\r\n        clear: () => setValue(''),\r\n        value: () => value\r\n    }\r\n};\r\n\r\n\r\nfunction TodoCreater({onCreate, onChange, title = '', id, onToggle, description = ''}) {\r\n\r\n    const input = useInputValue(title);\r\n    const textArea = useInputValue(description);\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        if (input.value().trim()) {\r\n            if (id) {\r\n                onChange(id, input.value(), textArea.value());\r\n            } else {\r\n                onCreate(input.value(), textArea.value());\r\n                input.clear();\r\n                textArea.clear();\r\n            }\r\n            \r\n        }\r\n    };\r\n\r\n    return (\r\n        <form id=\"form\" onSubmit={submitHandler}>\r\n            <label htmlFor=\"task\">Название задачи</label>\r\n            <Input placeholder=\"Название задачи\" id=\"task\" {...input.bind}/>\r\n            <label htmlFor=\"description\">Описание задачи</label>\r\n            <TextArea placeholder=\"Описание задачи\" id=\"description\" showCount maxLength={200} {...textArea.bind}/>\r\n            {id\r\n            ?\r\n            <Button style={{marginTop: '2rem'}} form='form' key=\"submit\" htmlType=\"submit\" type=\"primary\" onClick={(e) => {\r\n                submitHandler(e)\r\n                onToggle(false)}}>\r\n              Сохранить изменения\r\n            </Button>\r\n            : null\r\n            }\r\n        </form>\r\n    )\r\n};\r\n\r\nTodoCreater.propTypes = {\r\n    onCreate: PropTypes.func,\r\n    onToggle: PropTypes.func,\r\n    onChange: PropTypes.func,\r\n    title: PropTypes.string,\r\n    description: PropTypes.string,\r\n    id: PropTypes.string\r\n};\r\n\r\n\r\nexport default TodoCreater;","import React, { useState } from 'react'\r\nimport TodoCreater from '../Todo/TodoCreate'\r\nimport './Modal.css'\r\nimport { Modal, Button } from 'antd';\r\n\r\nfunction ModalWindow ({onCreate}) {\r\n\r\n    const [state, setState] = useState(false);\r\n\r\n\r\n    return (\r\n        <>\r\n            <Button type=\"primary\" onClick={() => setState(true)}>Добавить задачу</Button>\r\n            {state\r\n            ? (\r\n                <Modal\r\n                visible={state}\r\n                title=\"Новая задача\"\r\n                onCancel={() => setState(false)}\r\n                footer={[\r\n                  <Button  key=\"back\" onClick={() => setState(false)}>\r\n                    Назад\r\n                  </Button>,\r\n                  <Button form='form' key=\"submit\" htmlType=\"submit\" type=\"primary\">\r\n                    Добавить задачу\r\n                  </Button>,\r\n                ]}\r\n              >\r\n                <TodoCreater onCreate={onCreate}/>\r\n              </Modal>\r\n            )\r\n            : null\r\n            }   \r\n        </>\r\n    )\r\n};\r\n\r\nexport default ModalWindow;","import PropTypes from 'prop-types';\r\nimport { useContext, useState } from 'react';\r\nimport Context from '../context';\r\nimport { Checkbox } from 'antd';\r\nimport { Card } from 'antd';\r\nimport {DeleteOutlined, EditOutlined} from '@ant-design/icons'\r\nimport TodoCreater from './TodoCreate';\r\n\r\n\r\nfunction TodoItem({todo, index, onChange}) {\r\n    const {removeTodo, changeTodo} = useContext(Context);\r\n    const [changeItem, setChangeItem] = useState(false);\r\n\r\n    const onToggle = (value) => {\r\n        setChangeItem(value)\r\n    };\r\n    \r\n    return(\r\n        <li style={todo.completed ? {textDecoration: 'line-through'} : null}>\r\n            <div className=\"site-card-border-less-wrapper\">\r\n                <Card title={todo.title} bordered={false} extra={<EditOutlined onClick={() => onToggle(!changeItem)} />}>\r\n                    \r\n                    {!changeItem \r\n                    ? (<>\r\n                        <div>\r\n                            <Checkbox onChange={() => onChange(todo.id)} checked={todo.completed}/>\r\n                            <strong> {index + 1}</strong>&nbsp; \r\n                            {todo.description || ''}\r\n                        </div>\r\n                        <div>\r\n                            <DeleteOutlined onClick={() => removeTodo(todo.id)}/>\r\n                        </div>\r\n                    </>)\r\n                    : <TodoCreater title={todo.title} id={todo.id} description={todo.description} onChange={changeTodo} onToggle={onToggle}/>}\r\n                        \r\n                </Card>\r\n            </div>\r\n        </li>\r\n    )};\r\n\r\nTodoItem.propTypes = {\r\n    todo: PropTypes.object.isRequired,\r\n    index: PropTypes.number.isRequired,\r\n    onChange: PropTypes.func.isRequired\r\n};\r\n\r\nexport default TodoItem;","import TodoItem from \"./TodoItem\";\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction TodoList(props) {\r\n    return(\r\n        <ul>\r\n            {props.todos.map((item, index) => (<TodoItem key={index + '_' + item.id} todo={item} index={index} onChange={props.onToggle}/>\r\n                ))}\r\n        </ul>\r\n    )\r\n};\r\n\r\nTodoList.propTypes = {\r\n    todos: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n    onToggle: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default TodoList;","import React, { useEffect, useState, useContext, useCallback } from \"react\";\r\nimport Context from \"../context\";\r\nimport Loader from \"../Loader\";\r\nimport ModalWindow from \"../Modal/ModalWindow\";\r\nimport TodoList from \"../Todo/TodoList\";\r\nimport { Empty, message, Space } from 'antd';\r\nimport { useHttp } from \"../hooks/http.hook\";\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\n\r\nfunction MainPage() {\r\n  const auth = useContext(AuthContext);\r\n\r\n  const {loading, request, error} = useHttp();\r\n\r\n  const fetchTodo = useCallback(async () => {\r\n    try {\r\n      const fetch = await request('/api/main/', 'GET', null, {\r\n        Authorization: `Bearer ${auth.token}`\r\n      })\r\n      setState(fetch);\r\n    } catch (e) {\r\n      \r\n    }\r\n  }, [request, auth.token]);\r\n  \r\n  useEffect( () =>{\r\n    fetchTodo();\r\n  }, [fetchTodo])\r\n\r\n  const [todos, setState] = useState([]);\r\n\r\n  const toggleTodo = useCallback(async (id) => {\r\n   try {\r\n    const find = todos.find(item => item.id === id);\r\n    const completed = !find.completed;\r\n    const response = await request('/api/main/completed/', 'PATCH', {id, completed}, {\r\n      Authorization: `Bearer ${auth.token}`\r\n    });\r\n    let newTodos = [...todos];\r\n    if (response.status) {\r\n      newTodos = newTodos.map(item => {\r\n        if (item.id === id) {\r\n          item.completed = completed;\r\n        }\r\n        return item\r\n      })\r\n    }\r\n    setState([...newTodos])\r\n   } catch (e) {\r\n      message.error(e.message);\r\n   }\r\n  }, [todos, request, auth.token]);\r\n\r\n  const removeTodo = useCallback(async (id) => {\r\n    try {\r\n      const response = await request('/api/main/', 'DELETE', {id}, {\r\n        Authorization: `Bearer ${auth.token}`\r\n      });\r\n      let newTodos = [...todos];\r\n      if (response.status) {\r\n         newTodos = newTodos.filter(item => item.id !== id);\r\n      }\r\n      setState(newTodos)\r\n    } catch (e) {\r\n      message.error(e.message);\r\n    }\r\n  }, [request, auth.token, todos]);\r\n\r\n  const changeTodo = async (id, title, description) => {\r\n\r\n    try {\r\n      const response = await request('/api/main/description/', 'PATCH', {id, title, description}, {\r\n        Authorization: `Bearer ${auth.token}`\r\n      });\r\n  \r\n      if (response.status) {\r\n        const find = todos.find((item) => item.id === id);\r\n        find.title = title;\r\n        find.description = description;\r\n      }\r\n      setState([...todos]);\r\n    } catch (e) {\r\n      message.error(e.message);\r\n    }\r\n  };\r\n\r\n  const addTodo = useCallback(async (title, description) => {\r\n    try {\r\n      const newTask = {completed: false, title, description, id: Date.now().toLocaleString()};\r\n\r\n      const response = await request('/api/main/', 'POST', {...newTask}, {\r\n      Authorization: `Bearer ${auth.token}`\r\n      });\r\n      let newTodos = [...todos];\r\n      if (response.status) {\r\n        newTodos.push(newTask);\r\n      }\r\n      setState([...newTodos]);\r\n    } catch (e) {\r\n      message.error(error);\r\n    }\r\n  }, [todos, auth.token, request, error])\r\n\r\n  return (\r\n    <Context.Provider value={{removeTodo, changeTodo}}>\r\n        <Space>\r\n        </Space>\r\n        {loading && <Loader/>}\r\n        {todos.length ?  <TodoList todos={todos} onToggle={toggleTodo}/> : loading ? null : (<Empty description={<span>Задач больше нет</span>} />)}\r\n        <ModalWindow onCreate={addTodo}/>\r\n    </Context.Provider>\r\n  );\r\n};\r\n\r\nexport default MainPage;\r\n","import { Layout } from 'antd';\nimport { useRoutes } from \"./route\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { useAuth } from './hooks/auth.hook';\nimport { AuthContext } from './context/AuthContext';\n\nconst { Header, Content, Footer } = Layout;\n\n\n\nfunction App() {\n  const {token, login, logout, userId} = useAuth();\n  const isAuthenticated = !!token;\n  const routes = useRoutes(isAuthenticated);\n\n  return (\n    <AuthContext.Provider value={{token, login, logout, userId, isAuthenticated}}>\n       <BrowserRouter>\n      <Layout className=\"layout\">\n        <Header>\n          <div className=\"logo\">\n            <h1>ToDo React</h1>\n            {isAuthenticated ? <a href=\"true\" onClick={logout}>Выйти</a> : null}\n          </div>\n        </Header>\n        <Content style={{ padding: '0 50px' }}>\n          <div className=\"site-layout-content\">\n            <div className=\"wrapper\">\n              {routes}\n            </div> \n          </div>\n        </Content>\n        <Footer style={{ textAlign: 'center' }}>Todo list React@</Footer>\n      </Layout>\n     </BrowserRouter>\n    </AuthContext.Provider>\n  );\n};\n\nexport default App;\n","import { useCallback, useEffect, useState } from \"react\"\r\n\r\n\r\nexport const useAuth = () => {\r\n    const [token, setToken] = useState(null);\r\n    const [userId, setUserId] = useState(null);\r\n\r\n    const login = useCallback((jwtToken, id) => {\r\n        setToken(jwtToken);\r\n        setUserId(id);\r\n\r\n        localStorage.setItem('userData', JSON.stringify({userId:id, token:jwtToken}))\r\n    }, []);\r\n\r\n    const logout = useCallback(() => {\r\n        setToken(null);\r\n        setUserId(null);\r\n        localStorage.removeItem('userData');\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const data = JSON.parse(localStorage.getItem('userData'));\r\n        if (data && data.token) {\r\n            login(data.token, data.userId)\r\n        }\r\n    }, [login])\r\n\r\n    return { login, logout, token, userId}\r\n}","import { Switch, Route, Redirect } from \"react-router-dom\";\r\nimport AuthPage from \"./Page/AuthPage\";\r\nimport MainPage from \"./Page/MainPage\";\r\n\r\nexport const useRoutes = isAuthenticated => {\r\n    if (isAuthenticated) {\r\n        return (\r\n            <Switch>\r\n                <Route path=\"/main\">\r\n                    <MainPage/>\r\n                </Route>\r\n                <Redirect to=\"/main\"/>\r\n            </Switch>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Switch>\r\n            <Route exact path=\"/\">\r\n                <AuthPage/>\r\n            </Route>\r\n            <Redirect to=\"/\"/>\r\n        </Switch>\r\n    )\r\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}